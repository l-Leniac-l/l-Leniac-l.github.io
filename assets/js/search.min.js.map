{"version":3,"sources":["search.js"],"names":["searchEngine","post_list","$","index","lunr","this","field","boost","index_tag","data","getJSON","populate","then","loaded_data","each","value","add","extend","id","getQueryString","sParam","sPageURL","window","location","search","substring","sURLVariables","split","i","length","sParameterName","join","highlight","query","text","pos","result","toLowerCase","match","indexOf","substr","perform","tag","results","empty","appendString1","append","forEach","item","ref","appendString","title","description","url","html","onload","pathname","search_type","queryString","setTimeout"],"mappings":"AAAA,GAAIA,eACFC,UAAWC,EAAE,cAEbC,MAAOC,KAAK,WACVC,KAAKC,MAAM,MACXD,KAAKC,MAAM,SAAWC,MAAO,KAC7BF,KAAKC,MAAM,UACXD,KAAKC,MAAM,eAAiBC,MAAO,IACnCF,KAAKC,MAAM,QACXD,KAAKC,MAAM,SAGbE,UAAWJ,KAAK,WACdC,KAAKC,MAAM,MACXD,KAAKC,MAAM,SACXD,KAAKC,MAAM,UACXD,KAAKC,MAAM,eACXD,KAAKC,MAAM,QAAUC,MAAO,KAC5BF,KAAKC,MAAM,SAGbG,KAAMP,EAAEQ,QAAQ,qBAEhBC,SAAU,WACRX,aAAaS,KAAKG,KAAK,SAASC,GAC9BX,EAAEY,KAAKD,EAAa,SAASV,EAAOY,GAClCf,aAAaG,MAAMa,IACjBd,EAAEe,QAASC,GAAMf,GAASY,IAE5Bf,aAAaQ,UAAUQ,IACrBd,EAAEe,QAASC,GAAMf,GAASY,SAMlCI,eAAgB,SAASC,GAGvB,IAAK,GAFDC,GAAWC,OAAOC,SAASC,OAAOC,UAAU,GAC5CC,EAAgBL,EAASM,MAAM,KAC1BC,EAAI,EAAGA,EAAIF,EAAcG,OAAQD,IAAK,CAC3C,GAAIE,GAAiBJ,EAAcE,GAAGD,MAAM,IAC5C,IAAIG,EAAe,IAAMV,EACrB,MAAOU,GAAe,GAAGH,MAAM,KAAKI,KAAK,OAKnDC,UAAW,SAASC,EAAOC,GACzB,GAAIC,GAAM,KACNC,EAAS,IAKb,OAJGF,GAAKG,cAAcC,MAAML,EAAMI,iBAChCF,EAAMD,EAAKG,cAAcE,QAAQN,EAAMI,eACvCD,EAASF,EAAKM,OAAOL,EAAIF,EAAMJ,SAE1BO,GAGTK,QAAS,SAASR,EAAMS,GACtBA,EAAMA,IAAO,EACb1C,aAAaW,UACb,IAAIgC,GAAU,IAKZA,GADCD,KAAQ,EACC1C,aAAaQ,UAAUgB,OAAOS,GAE9BjC,aAAaG,MAAMqB,OAAOS,GAGtCjC,aAAaS,KAAKG,KAAK,SAASC,GAC9B,GAAG8B,EAAQd,OAAQ,CACjB7B,aAAaC,UAAU2C,OACvB,IAAIC,GAAgB,+CAA+CZ,EAAM,QACzEjC,cAAaC,UAAU6C,OAAOD,GAC9BF,EAAQI,QAAQ,SAASX,GACvB,GAAIY,GAAOnC,EAAYuB,EAAOa,KAC1BC,EAAe,mDACIF,EAAKG,MAAMxB,MAAM3B,aAAagC,UAAUC,EAAMe,EAAKG,QAAQpB,KAAK,sBAAsB/B,aAAagC,UAAUC,EAAMe,EAAKG,OAAO,WAAa,+BACvIH,EAAKI,YAAYzB,MAAM3B,aAAagC,UAAUC,EAAMe,EAAKI,cAAcrB,KAAK,sBAAsB/B,aAAagC,UAAUC,EAAMe,EAAKI,aAAa,WAAa,gBAC7KJ,EAAKK,IAAM,+CAExBrD,cAAaC,UAAU6C,OAAOI,SAGhClD,cAAaC,UAAUqD,KAAK,gDAAgDrB,EAAM,aAO1FX,QAAOiC,OAAS,WACd,GAA+B,wBAA5BjC,OAAOC,SAASiC,SAAoC,CACrD,GAAIC,GAAczD,aAAamB,eAAe,IAC9C,IAAkB,GAAfsC,EAAkB,CACnB,GAAIC,GAAc1D,aAAamB,eAAe,QAC9CwC,YAAW,WACT3D,aAAayC,QAAQiB,GACrB,MAGJ,GAAkB,GAAfD,EAAkB,CACnB,GAAIC,GAAc1D,aAAamB,eAAe,OAAM,EACpDwC,YAAW,WACT3D,aAAayC,QAAQiB,GACrB","file":"search.min.js","sourcesContent":["var searchEngine = {\n  post_list: $(\".post-list\"),\n\n  index: lunr(function () {\n    this.field('id');\n    this.field('title', { boost: 10 });\n    this.field('author');\n    this.field('description', { boost: 5 });\n    this.field('tags');\n    this.field('url');\n  }),\n\n  index_tag: lunr(function () {\n    this.field('id');\n    this.field('title');\n    this.field('author');\n    this.field('description');\n    this.field('tags', { boost: 10 });\n    this.field('url');\n  }),\n\n  data: $.getJSON('/search_data.json'),\n\n  populate: function() {\n    searchEngine.data.then(function(loaded_data){\n      $.each(loaded_data, function(index, value){\n        searchEngine.index.add(\n          $.extend({ \"id\": index }, value)\n        );\n        searchEngine.index_tag.add(\n          $.extend({ \"id\": index }, value)\n        );\n      });\n    });\n  },\n\n  getQueryString: function(sParam) {\n    var sPageURL = window.location.search.substring(1);\n    var sURLVariables = sPageURL.split('&');\n    for (var i = 0; i < sURLVariables.length; i++) {\n        var sParameterName = sURLVariables[i].split('=');\n        if (sParameterName[0] == sParam) {\n            return sParameterName[1].split(\"+\").join(\" \");\n        }\n    }\n  },\n\n  highlight: function(query, text) {\n    var pos = null;\n    var result = null;\n    if(text.toLowerCase().match(query.toLowerCase())) {\n      pos = text.toLowerCase().indexOf(query.toLowerCase());\n      result = text.substr(pos,query.length);\n    }\n    return result;\n  },\n\n  perform: function(query,tag){\n    tag = tag || false;\n    searchEngine.populate();\n    var results = null;\n    var msg_success = null;\n    var msg_error = null;\n\n    if(tag === true) {\n      results = searchEngine.index_tag.search(query);\n    } else {\n      results = searchEngine.index.search(query);\n    }\n\n    searchEngine.data.then(function(loaded_data){\n      if(results.length) {\n        searchEngine.post_list.empty();\n        var appendString1 = '<h1 class=\"search_msg\">Showing results for \"'+query+'\"</h1>';\n        searchEngine.post_list.append(appendString1);\n        results.forEach(function(result) {\n          var item = loaded_data[result.ref];\n          var appendString = '<article class=\"post -search\">'+\n          '<h1 class=\"title\">' + item.title.split(searchEngine.highlight(query,item.title)).join('<span class=\"term\">'+searchEngine.highlight(query,item.title)+'</span>') + '</h1>'+\n          '<p class=\"description\">' + item.description.split(searchEngine.highlight(query,item.description)).join('<span class=\"term\">'+searchEngine.highlight(query,item.description)+'</span>') + '</p>'+\n          '<a href=\"'+ item.url + '\" class=\"link\">Continue Reading</a>'+\n          '</article>';\n          searchEngine.post_list.append(appendString);\n        });\n      } else {\n        searchEngine.post_list.html('<h1 class=\"search_msg\">No results found for \"'+query+'\"</h1>');\n      }\n    });\n  }\n\n}\n\nwindow.onload = function() {\n  if(window.location.pathname == \"/search_results.html\") {\n    var search_type = searchEngine.getQueryString('a')\n    if(search_type == 1) {\n      var queryString = searchEngine.getQueryString('query');\n      setTimeout(function() {\n        searchEngine.perform(queryString),\n        500\n      })\n    }\n    if(search_type == 2) {\n      var queryString = searchEngine.getQueryString('tag',true);\n      setTimeout(function() {\n        searchEngine.perform(queryString),\n        500\n      })\n    }\n  }\n}\n"],"sourceRoot":"/source/"}