var searchEngine={post_list:$(".post-list"),index:lunr(function(){this.field("id"),this.field("title",{boost:10}),this.field("author"),this.field("description",{boost:5}),this.field("tags"),this.field("url")}),index_tag:lunr(function(){this.field("id"),this.field("title"),this.field("author"),this.field("description"),this.field("tags",{boost:10}),this.field("url")}),data:$.getJSON("/search_data.json"),populate:function(){searchEngine.data.then(function(a){$.each(a,function(a,b){searchEngine.index.add($.extend({id:a},b)),searchEngine.index_tag.add($.extend({id:a},b))})})},getQueryString:function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1].split("+").join(" ")}},highlight:function(a,b){var c=null,d=null;return b.toLowerCase().match(a.toLowerCase())&&(c=b.toLowerCase().indexOf(a.toLowerCase()),d=b.substr(c,a.length)),d},perform:function(a,b){b=b||!1,searchEngine.populate();var c=null;c=b===!0?searchEngine.index_tag.search(a):searchEngine.index.search(a),searchEngine.data.then(function(b){if(c.length){searchEngine.post_list.empty();var d='<h1 class="search_msg">Showing results for "'+a+'"</h1>';searchEngine.post_list.append(d),c.forEach(function(c){var d=b[c.ref],e='<article class="post -search"><h1 class="title">'+d.title.split(searchEngine.highlight(a,d.title)).join('<span class="term">'+searchEngine.highlight(a,d.title)+"</span>")+'</h1><p class="description">'+d.description.split(searchEngine.highlight(a,d.description)).join('<span class="term">'+searchEngine.highlight(a,d.description)+"</span>")+'</p><a href="'+d.url+'" class="link">Continue Reading</a></article>';searchEngine.post_list.append(e)})}else searchEngine.post_list.html('<h1 class="search_msg">No results found for "'+a+'"</h1>')})}};window.onload=function(){if("/search_results.html"==window.location.pathname){var a=searchEngine.getQueryString("a");if(1==a){var b=searchEngine.getQueryString("query");setTimeout(function(){searchEngine.perform(b),500})}if(2==a){var b=searchEngine.getQueryString("tag",!0);setTimeout(function(){searchEngine.perform(b),500})}}};
